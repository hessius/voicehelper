<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Opener</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
  <script>
    setTimeout(function () {
      // Calculate bottom-right position
  // Get width and height from url parameters if present, else use defaults
  const params = new URLSearchParams(window.location.search);
  const width = parseInt(params.get('width')) || 500;
  const height = parseInt(params.get('height')) || window.screen.availHeight;
  const left = window.screen.availWidth - width;
  const top = 0;


      // Build redirector url with url(s), titles, image, width, and height parameters if present
      const targetUrl = params.get('url');
      let redirectorUrl = "redirector.html";
      const redirectorParams = [];
      
      // Check for multiple URLs (url, url2, url3, etc.) and titles (title, title2, title3, etc.)
      const urls = [];
      const titles = [];
      let urlIndex = 1;
      
      // First URL (can be just 'url' parameter)
      if (targetUrl) {
        urls.push(targetUrl);
        titles.push(params.get('title') || '');
      }
      
      // Additional URLs (url2, url3, etc.)
      let nextUrl = params.get(`url${urlIndex + 1}`);
      while (nextUrl) {
        urls.push(nextUrl);
        titles.push(params.get(`title${urlIndex + 1}`) || '');
        urlIndex++;
        nextUrl = params.get(`url${urlIndex + 1}`);
      }
      
      // Pass URLs and titles to redirector
      if (urls.length > 0) {
        for (let i = 0; i < urls.length; i++) {
          redirectorParams.push(`url${i === 0 ? '' : i + 1}=${encodeURIComponent(urls[i])}`);
          if (titles[i]) {
            redirectorParams.push(`title${i === 0 ? '' : i + 1}=${encodeURIComponent(titles[i])}`);
          }
        }
      }
      
      // Pass image parameter if present
      if (params.get('image')) redirectorParams.push(`image=${encodeURIComponent(params.get('image'))}`);
      if (params.get('width')) redirectorParams.push(`width=${encodeURIComponent(params.get('width'))}`);
      if (params.get('height')) redirectorParams.push(`height=${encodeURIComponent(params.get('height'))}`);
      if (params.get('hideurl')) redirectorParams.push(`hideurl=${encodeURIComponent(params.get('hideurl'))}`);
      if (redirectorParams.length > 0) redirectorUrl += `?${redirectorParams.join('&')}`;

      // Open the redirector window
      window.open(
        redirectorUrl,
        "RedirectWindow",
        `width=${width},height=${height},left=${left},top=${top},resizable=no,scrollbars=yes,menubar=no,toolbar=no,location=no,status=no,titlebar=no`
      );

      window.close();
    }, 50);
  </script>
</body>
</html>
